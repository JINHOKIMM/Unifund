<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link
	href="http://netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
	rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script	src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="../resources/js/jquery.twbsPagination.js" type="text/javascript"></script>
<style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .crew-details {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            position: relative;
        }

        .crew-details img.logo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin-right: 20px;
        }
        
        .crew-con img.recruitment_information {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin-right: 20px;
        }

        .crew-details .info {
            flex-grow: 1;
        }

        .crew-details .buttons {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
        }

        .crew-details .btn {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 5px 10px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 10px;
        }

        .crew-details .btn:hover {
            background-color: #0056b3;
        }

        .crew-con {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            text-align: center;
        }

        .crew-description h2 {
            font-size: 20px;
        }

        .crew-con {
            margin-top: 20px;
            text-align: center;
        }

        .crew-con p {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .crew-con img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        .crew-table {
            margin-top: 20px;
            border-collapse: collapse;
            width: 100%;
        }

        .crew-table th, .crew-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        .crew-table th {
            background-color: #f2f2f2;
        }

        .activity-section {
            margin-top: 20px;
            text-align: center;
        }

        .activity-section h2 {
            font-size: 20px;
        }

        .activity-images {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .activity-images img {
            width: 200px;
            height: 150px;
            border-radius: 10px;
            margin: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

.activity-buttons {
            margin-top: 20px;
            text-align: right;
        }
        
.modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.4);
}

.modal-content {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}
</style>
</head>
<body>
	<%@ include file="/WEB-INF/views/common/header.jsp"%>
    <input type="hidden" name="crew_idx" class="crew_idx" id="crew_idx" value="${crew.crew_idx}"/>
    <input type="hidden" name="mem_idx" class="mem_idx" id="mem_idx" value="${mem_idx}"/>
    <input type="hidden" name="state" class="state" id="state" value="${crewMember_list.state}"/>
    <div class="container" id="crew-detail-container">
        <div class="crew-details">
            <img src="/photo/${crew.crew_logo}" class="logo"> 
            <div class="info">
                <h1>${crew.crew_name}</h1>
                <p>Ï£º Î∂ÑÏïº: ${crew.crew_exp}</p>
                <p>ÌôúÎèôÏßÄÏó≠: ${crew.crew_local}</p>
                <p>ÏÜåÌÜµÎßÅÌÅ¨: ${crew.crew_link}</p>
                <p>Ïù∏Í∏∞ÎèÑ : ${crew.crew_cool_cnt}</p>
            </div>
            <div class="buttons">
                <button class="btn apply-btn" onclick="apply()" >ÌÅ¨Î£® Ïã†Ï≤≠</button>
                <button class="btn report-btn" onclick="openReportModal()">ÌÅ¨Î£® Ïã†Í≥†</button>
					<!-- ÌÅ¨Î£® Ïã†Í≥† ÌåùÏóÖ Î™®Îã¨ -->
					<div id="reportModal" class="modal">
    					<div class="modal-content">
        					<span class="close" onclick="closeReportModal()">&times;</span>
        					<h2>ÌÅ¨Î£® Ïã†Í≥†</h2>
        					<textarea id="repContent" name="repContent" rows="4" placeholder="Ïã†Í≥† ÏÇ¨Ïú†Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"></textarea>
        					<button class="btn report-submit-btn" onclick="submitReport()">Ïã†Í≥†</button>
        					<button class="btn cancel-btn" onclick="closeReportModal()">Ï∑®ÏÜå</button>
    					</div>
					</div>
                <div class="thumb">
                    <button class="btn like-btn" onclick="cool()">üëç</button>
                </div>
                <c:if test="${sessionScope.mem_idx == crew.crew_leader || sessionScope.mem_idx == crew.crew_member}">
                	<button class="btn leave-btn" onclick="crewOut()">ÌÅ¨Î£® ÌÉàÌá¥ÌïòÍ∏∞</button>
                </c:if>
                <c:if test="${sessionScope.mem_idx == crew.crew_leader || sessionScope.mem_idx == crew.manager_idx}">
					<button class="btn edit-btn" onclick="location.href='/main/crew/update.go?crew_idx=${crew.crew_idx}'">ÌÅ¨Î£® ÏàòÏ†ï</button> 
				</c:if>
				<c:if test="${sessionScope.mem_idx == crew.crew_leader || sessionScope.mem_idx == crew.manager_idx}">
    				<button class="btn delete-btn" onclick="openDeleteModal()">ÌÅ¨Î£® ÏÇ≠Ï†ú</button>				
				</c:if>
					<div id="deleteModal" class="modal">
    					<div class="modal-content">
        					<span class="close" onclick="closeDeleteModal()">&times;</span>
        					<h2>ÌÅ¨Î£® ÏÇ≠Ï†ú</h2>
        					<textarea id="delContent" name="delContent" rows="4" placeholder="ÏÇ≠Ï†ú ÏÇ¨Ïú†Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"></textarea>
        					<button class="btn delete-submit-btn" onclick="submitDelete()">ÏÇ≠Ï†ú</button>
        					<button class="btn cancel-btn" onclick="closeDeleteModal()">Ï∑®ÏÜå</button>
    					</div>
					</div>
            </div>
        </div>
        <hr>
        <div class="crew-con">
            <p>ÌÅ¨Î£® ÏÑ§Î™Ö Î∞è Î™®Ïßë Ï†ïÎ≥¥</p>
            <p>${crew.crew_con}</p>
            <img src="/photo/${crew.crew_recruitment_information}" class="recruitment_information"> 
            <hr>
            <div id="delegateModal" class="modal" style="display: none;">
    			<div class="modal-content">
        			<span class="close" onclick="closeDelegateModal()">&times;</span>
        			<h2>ÌÅ¨Î£®Ïû• ÏúÑÏûÑ</h2>
        			<textarea id="delegateReason" name="delegateReason" rows="4" placeholder="ÌÅ¨Î£®Ïû• ÏúÑÏûÑ ÏÇ¨Ïú†Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"></textarea>
        			<button class="btn delegate-submit-btn" onclick="delegateLeader()">ÏúÑÏûÑ</button>
        			<input type="hidden" id="num1"/>
        			<button class="btn cancel-btn" onclick="closeDelegateModal()">Ï∑®ÏÜå</button>
    			</div>
			</div>
			<div>
            <table class="crew-table">
                <thead>
                    <tr>
                        <th></th>
                        <th>ID</th>
                        <th>ÎπÑÍ≥†</th>
                    </tr>
                </thead>
                <tbody class="crew_member_list" id="list"></tbody>
                <tr>
      				<td colspan="3">
      					<div class="container"> 
      						<nav aria-label="Page navigation">
                				<ul class="pagination" id="pagination_member"></ul>
            				</nav>     
        				</div>
      				</td>
     			 </tr>
            </table>
            <div class="activity-section">
            	<table class="activity-table">
            		<thead>
            			<tr>
            				<th>ÌôúÎèô ÏÇ¨ÏßÑ</th>
            				<th>ÌôúÎèô ÎÇ¥Ïö©</th>
            			</tr>
            		</thead>
            		<tbody class="activity_list" id="activity_list"></tbody>
            		<tr>
            			<td colspan="2">
            				<div class="container">
            					<nav aria-label="Page navigation" style="text-align:center">
                					<ul class="pagination" id="pagination"></ul>
            					</nav>     
            				</div>
            			</td>
            		</tr>
            	</table>
            	<div class="activity-buttons">
            		<c:if test="${sessionScope.mem_idx == crew.crew_leader}">
            			<button class="btn btn-primary" onclick="openActivityModal()">ÌôúÎèôÎÇ¥Ïó≠ Îì±Î°ù</button>
            		</c:if>
            	</div>
            </div>
            <!-- ÌôúÎèô ÎÇ¥Ïó≠ Îì±Î°ù Î™®Îã¨ -->
			<div id="activityModal" class="modal">
    			<div class="modal-content">
        			<span class="close" onclick="closeActivityModal()">&times;</span>
        			<h2>ÌôúÎèôÎÇ¥Ïó≠ Îì±Î°ù</h2>
        			<form action="activity/write.do" method="post" enctype="multipart/form-data">
        				<input type="hidden" name="crew_idx" class="crew_idx" id="crew_idx" value="${crew.crew_idx}"/>
            			<textarea id="activity_details" name="activity_details" rows="6" placeholder="ÌôúÎèô ÎÇ¥Ïö©(1000Ïûê Ïù¥ÎÇ¥)ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"></textarea>
            			<input type="file" id="crew_activity_photo" name="crew_activity_photo">        			
        			<button class="btn btn-primary" onclick="submitActivity()">Îì±Î°ù</button>
        			<button class="btn btn-secondary" onclick="closeActivityModal()">Ï∑®ÏÜå</button>
        			</form>
    			</div>
			</div>
        </div>        
    </div>
   

</body>

<script>



var showPage = 1;
var showPage1 = 1;

$(document).ready(function(){
	listCall(showPage);
	listCall1(showPage1);
/* 	$('#pagination_member').twbsPagination('destroy');
	$('#pagination').twbsPagination('destroy'); 	 */
	
    var userState = $("#state").val(); 
    console.log(userState);

    if (userState === "ÌÅ¨Î£®Ïû•") {
        $(".crew-buttons").show(); // ÌÅ¨Î£®Ïû•Ïù∏ Í≤ΩÏö∞ Î≤ÑÌäº Î≥¥Ïù¥Í∏∞
    } else {
        $(".crew-buttons").hide(); // ÏùºÎ∞ò ÌÅ¨Î£®ÏõêÏù∏ Í≤ΩÏö∞ Î≤ÑÌäº Ïà®Í∏∞Í∏∞
    }
});

function listCall(showPage){	
	console.log(showPage);
	var crew_idx= $("#crew_idx").val();
    $.ajax({
       type:'get',
       url:'./detail.ajax',
       data:{
           'page':showPage,
           'cnt':5,
           'crew_idx':crew_idx
       },
       dataType:'json',
       success:function(data){                 
          console.log(data);          
          drawList(data.list); 
          var startPage = 1;

          $('#pagination_member').twbsPagination({
          	startPage:startPage, // ÏãúÏûëÌéòÏù¥ÏßÄ
          	totalPages:data.totalPages, // Ï¥ù ÌéòÏù¥ÏßÄ Ïàò
          	visiblePages:5, // Î≥¥Ïó¨Ï§Ñ ÌéòÏù¥ÏßÄ Ïàò 1,2,3,4,5
          	onPageClick:function(evt,pg){ // ÌéòÏù¥ÏßÄ ÌÅ¥Î¶≠Ïãú Ïã§Ìñâ Ìï®Ïàò
          		console.log(pg); // ÌÅ¥Î¶≠Ìïú ÌéòÏù¥ÏßÄ Î≤àÌò∏
          		showPage = pg;
          		listCall(pg);
          		
          	}
          })
       },
       error:function(request, status, error){
    	   console.log("code: " + request.status)
           console.log("message: " + request.responseText)
           console.log("error: " + error);
       }
    });
}

function listCall1(showPage1){	
	var crew_idx= $("#crew_idx").val();
	var crew_activity_details_idx= $("#crew_activity_details").val();
    $.ajax({
       type:'get',
       url:'./activityList.ajax',
       data:{
           'page':showPage1,
           'cnt':1,
           'crew_idx':crew_idx,
           'crew_activity_details_idx':crew_activity_details_idx
       },
       dataType:'json',
       success:function(data){                 
          console.log(data);          
          drawList1(data.activity_list);   
          var startPage = 1;

          $('#pagination').twbsPagination({
          	startPage:startPage, // ÏãúÏûëÌéòÏù¥ÏßÄ
          	totalPages:data.totalPages, // Ï¥ù ÌéòÏù¥ÏßÄ Ïàò
          	visiblePages:5, // Î≥¥Ïó¨Ï§Ñ ÌéòÏù¥ÏßÄ Ïàò 1,2,3,4,5
          	onPageClick:function(evt,pg){ // ÌéòÏù¥ÏßÄ ÌÅ¥Î¶≠Ïãú Ïã§Ìñâ Ìï®Ïàò
          		console.log(pg); // ÌÅ¥Î¶≠Ìïú ÌéòÏù¥ÏßÄ Î≤àÌò∏
          		showPage1 = pg;
          		listCall1(pg);
          	}
          })
       },
       error:function(request, status, error){
    	   console.log("code: " + request.status)
           console.log("message: " + request.responseText)
           console.log("error: " + error);
       }
    });
}

function drawList1(activity_list) {
	var content='';
	
	for(item of activity_list){
		content += '<tr>';
		content += '<input type="hidden" value="${crew_activity_details.crew_activity_details_idx}" name="crew_activity_details_idx" class="crew_activity_details_idx">';
		content += '<td><img src="/photo/'+item.activity_photo+'"class="activity_photo_img"></td>';
		content += '<td>' + item.activity_details + '</td>';
		content += '</tr>';
		content += '<tr>';
		content += '<td colspan=2><input type="button" value="ÏÇ≠Ï†ú" onclick="activityDel('+item.crew_activity_details_idx+')"></td>';		
		content += '</tr>';
	}
	$('#activity_list').html(content);
	
}

function activityDel(idx) {
	console.log(idx);
	$.ajax({
	       type:'post',
	       url:'./activityDel.ajax',
	       data:{
	           'crew_activity_details_idx':idx
	       },
	       success:function(data){
	          console.log(data);  
	          alert('ÏÇ≠Ï†úÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.');
	          location.reload();
	       },
	       error:function(error){
	          console.log(error);
	          alert('ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
	       }
	    });
	
}

function drawList(list) {
    var content = '';
    var leaderFound = false; 

    for (item of list) {
        // ÌÅ¨Î£®Ïû•Ïù∏ Í≤ΩÏö∞ Î≤ÑÌäºÏ∂îÍ∞Ä x
        if (item.state === 'ÌÅ¨Î£®Ïû•' && !leaderFound) {
            content += '<tr>';
            content += '<td>' + item.state + '</td>';
            content += '<td>' + item.mem_id + '</td>';
            content += '<td></td>';
            content += '</tr>';
            leaderFound = true; // ÌÅ¨Î£®Ïû•Ïù¥ ÎÇòÏôîÏùåÏùÑ ÌëúÏãú
        } else if (item.state !== 'ÌÅ¨Î£®Ïû•') { // ÌÅ¨Î£®Ïû•Ïù¥ ÏïÑÎãå Í≤ΩÏö∞ ÏòÜÏóê Î≤ÑÌäº Ï∂îÍ∞Ä
        	content += '<tr>';
        	content += '<input type="hidden" value="${crewMember_list.mem_idx}" name="crewMem_idx" class="crewMem_idx">';
        	content += '<input type="hidden" value="${crewMember_list.crew_idx}" name="crew_idx" class="crew_idx">';
        	content += '<td>' + item.state + '</td>';
        	content += '<td>' + item.mem_id + '</td>';
        	content += '<td class="crew-buttons">';
        	content += '<c:if test="${sessionScope.mem_idx == crew.crew_leader || sessionScope.mem_idx == crew.manager_idx}">';
        	content += '<button class="btn btn-danger" onclick="kickMember('+item.mem_idx+')">Ï∂îÎ∞©</button>';
        	content += '<button class="btn btn-warning" onclick="openDelegateModal('+item.mem_idx+')">ÌÅ¨Î£®Ïû• ÏúÑÏûÑ</button>';
        	content += '</c:if>';
        	content += '</td>';
        	content += '</tr>';
        }        
    }    
    // ÌÖåÏù¥Î∏îÏóê ÎÇ¥Ïö© Ï∂îÍ∞Ä
    $('#list').html(content);
}



//Î™®Îã¨ Ïó¥Í∏∞
function openReportModal() {
    document.getElementById("reportModal").style.display = "block";
}

function closeReportModal() {
    document.getElementById("reportModal").style.display = "none";
}
function openDeleteModal() {
    document.getElementById("deleteModal").style.display = "block";
}

function closeDeleteModal() {
    document.getElementById("deleteModal").style.display = "none";
}

function openDelegateModal(num) {
    // Î™®Îã¨ Ïó¥Í∏∞ Ï†ÑÏóê mem_idx Í∞íÏùÑ Î∞õÏïÑÏò®Îã§.
    console.log(num);
    num1=num;
    $('#num1').attr('value',num);
    var ppp = $('#num1').val();
    console.log(ppp);
    document.getElementById("delegateModal").style.display = "block";
}

function closeDelegateModal() {
    document.getElementById("delegateModal").style.display = "none";
}

function openActivityModal() {
    document.getElementById("activityModal").style.display = "block";
}

function closeActivityModal() {
    document.getElementById("activityModal").style.display = "none";
}


function submitReport() { //ÌÅ¨Î£®Ïã†Í≥†
        var repContent = $("#repContent").val();
        var crew_idx= $("#crew_idx").val();
        $.ajax({
            type: 'post',
            url: './report.ajax',
            data: {
            	'repContent':repContent,
            	'crew_idx':crew_idx
            },
            dataType: 'json',
            success: function(response) {
                alert("Ïã†Í≥†Í∞Ä Ï†ëÏàòÎêòÏóàÏäµÎãàÎã§.");
            },
            error: function(xhr, status, error) {
                // Ïò§Î•ò Ïãú Ï≤òÎ¶¨Ìï† ÎÇ¥Ïö©
                alert("Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.");
            }
        });
}

function apply(){ //ÌÅ¨Î£®Ïã†Ï≤≠
	var mem_idx = $('input[type="hidden"].mem_idx').val();
    var crew_idx = $('input[type="hidden"].crew_idx').val();
    var confirmation = confirm("ÌÅ¨Î£®Ïóê Ïã†Ï≤≠ÌïòÏãúÍ≤†ÏäµÎãàÍπå?");

    if (confirmation) {
        $.ajax({
            type: 'post',
            url: './apply.ajax',
            data: {
                mem_idx: mem_idx,
                crew_idx: crew_idx
            },
            success: function(response) {
                if (response.success) {
                    alert(response.success);                    
                } else if (response.error) {
                    alert(response.error);
                }
            },
            error: function(xhr, status, error) {
                console.log(error);
            }
        });
    }
}

function cool() { // ÌÅ¨Î£® Ïù∏Í∏∞ÎèÑ 
	var mem_idx = $('input[type="hidden"].mem_idx').val();
	var crew_idx= $('input[type="hidden"].crew_idx').val();
	$.ajax({
		type : 'get',
		url : './CoolCheck.ajax',
		data : {
			'mem_idx' : mem_idx,
			'crew_idx' : crew_idx
		},
		success : function(data) {
			location.reload(); // ÌéòÏù¥ÏßÄ ÏÉàÎ°úÍ≥†Ïπ®
		},
		error : function(error) {
			console.log(error);
		}
	});	
}

function submitDelete(){ // ÌÅ¨Î£®ÏÇ≠Ï†ú(B ÏÉÅÌÉúÎ°ú update)
	var crew_idx= $('input[type="hidden"].crew_idx').val();
	var delContent = $("#delContent").val();
	$.ajax({
		type : 'post',
		url : './delete.ajax',
		data : {
			'crew_idx' : crew_idx,
			'delContent':delContent
		},
		success : function(data) {
			alert('ÏÇ≠Ï†úÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.');
			window.location.href='/main/crew/crewList.go';
		},
		error : function(error) {
			console.log(error);
		}
	});	
}

function crewOut() {
    var crew_idx = $('input[type="hidden"].crew_idx').val();
    $.ajax({
        type: 'post',
        url: './out.do',
        data: { 'crew_idx': crew_idx },
        success: function(response) {
            alert('ÌÅ¨Î£® ÌÉàÌá¥Í∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.');
            window.location.href = '/main/crew/crewList.go'; // ÌÅ¨Î£® Î™©Î°ù ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô
        },
        error: function(xhr, status, error) {
            console.log(error);
            alert('ÌÅ¨Î£® ÌÉàÌá¥ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
        }
    });
}

function kickMember(num) {
    var crew_idx = $('input[type="hidden"].crew_idx').val();
    var num=num;
   console.log(num);
    
    var confirmation = confirm("ÌÅ¨Î£®ÏõêÏùÑ Ï∂îÎ∞©ÌïòÏãúÍ≤†ÏäµÎãàÍπå?");
    if(confirmation){
        $.ajax({
            type: 'post',
            url: './deport.ajax',
            data: {
                'crew_idx': crew_idx,
                'crewMem_idx':num
            },
            success: function(data) {
                alert('Ï∂îÎ∞©Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.'); 
                location.reload();
            },
            error: function(xhr, status, error) {
                console.log(error);
                alert('Ï∂îÎ∞© Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.'); 
            }
        });
    }
}

function delegateLeader() {
	var ppp1 = $('#num1').val();
	console.log("ppp1",ppp1);
	var crew_idx = $('input[type="hidden"].crew_idx').val();
	num1= $('input[name="num1"]').val();
	console.log(num1);
    var delegateReason= $("#delegateReason").val();
    
    if (delegateReason.length >= 10) {
        alert('ÏÇ¨Ïú†Îäî 100Ïûê Ïù¥ÎÇ¥Î°ú Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöî.');
        $("#delegateReason").focus(); // ÏûÖÎ†• ÌïÑÎìúÏóê Ìè¨Ïª§Ïä§Î•º ÎßûÏ∂•ÎãàÎã§.
        return; // Ìï®Ïàò Ïã§ÌñâÏùÑ Ï§ëÏßÄÌï©ÎãàÎã§.
    }
    
    var confirmation = confirm("ÌÅ¨Î£®Ïû•ÏùÑ ÏúÑÏûÑÌïòÏãúÍ≤†ÏäµÎãàÍπå?");
    if(confirmation){
        $.ajax({
            type: 'post',
            url: './delegate.ajax',
            data: {
                'crew_idx': crew_idx,
                'crewMem_idx':ppp1,
                'delgateContent':delegateReason
            },
            success: function(data) {
                alert('ÏúÑÏûÑÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.'); 
                location.reload();
            },
            error: function(xhr, status, error) {
                console.log(error);
                alert('ÏúÑÏûÑ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.'); 
            }
        });
    }	    
}

function submitActivity() {
	var $activity_details=$('input[name="activity_details"]');
	var $crew_activity_photo =$('input[name="crew_activity_photo"]');
	
	if(activity_details.val()==''){
		alert('ÌôúÎèô ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
		$activity_details.focus();
	}else if($activity_details.val().length>1000){
		alert('ÌôúÎèôÎÇ¥Ïö©ÏùÄ 1000Ïûê Ïù¥ÎÇ¥Î°ú Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöî.');
		$activity_details.focus();
	}else if($crew_activity_photo.val()=''){
		alert('ÏÇ¨ÏßÑÏùÑ Ï≤®Î∂ÄÌï¥ Ï£ºÏÑ∏Ïöî.');
		$crew_activity_photo.focus();
	}else {
		$('form').submit();
	}
}



</script>
</html>